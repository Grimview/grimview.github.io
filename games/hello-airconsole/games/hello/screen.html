<html>
    <head>
        <script src="https://www.airconsole.com/api/airconsole-1.7.0.js"></script>

        <script>
            var deviceIds = [];
            var airconsole = new AirConsole();

            const Player = {
                x: 50,
                y: 50
            }

            var map = {}; // You could also use an array
            onkeydown = onkeyup = function(e){
                e = e || event; // to deal with IE
                map[e.keyCode] = e.type == 'keydown';
                /* insert conditional here */
            }
            
            airconsole.onMessage = function(deviceId, data) {
                if (deviceIds.indexOf(deviceId) == -1) {
                    deviceIds.push(deviceId);

                    document.body.innerHTML += "<h1 style='color: white;' id='dev" + deviceId + "'></h1>";
                }

                document.getElementById('dev' + deviceId).innerHTML = "I am receiving " + data + " from device " + deviceId;
            }

            function draw() {
                var canvas = document.getElementById('game');

                if (canvas.getContext) {
                    var context = canvas.getContext('2d');

                    context.clearRect(0,0, canvas.width, canvas.height);
                    
                    context.fillStyle = 'red';
                    context.fillRect(Player.x, Player.y, 50, 50);
                }

                requestAnimationFrame(draw);
            }

            window.onkeydown = function(event) {
                var keyPr = event.keyCode; //Key code of key pressed

                var canvas = document.getElementById('game');
            
                if (keyPr === 39 && Player.x<=canvas.width - 60){ 
                    Player.x += 2; //right arrow add 20 from current
                } else if (keyPr === 37 && Player.x>10){
                    Player.x -= 2; //left arrow subtract 20 from current
                }

                if (keyPr === 38 && Player.y>10) {
                    Player.y -= 2; //top arrow subtract 20 from current
                } else if (keyPr === 40 && Player.y<=canvas.height - 60){
                    Player.y += 2; //bottom arrow add 20 from current
                }
            };

            function init() {
                draw();
            }
        </script>

        <link rel="stylesheet" href="styles/screen.css">
    </head>

    <body onload="init()">
        <canvas id="game">

        </canvas>
    </body>
</html>